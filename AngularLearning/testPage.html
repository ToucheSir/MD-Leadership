<!DOCTYPE html>
<html data-ng-app="demoApp">
<head>
<meta charset="UTF-8" />
<title>First AngularJS App</title>
<link rel="stylesheet" href="myStyles.css" />

</head>
<body>
	<div data-ng-view=""></div>
	
	<script type="text/javascript" src="angular.min.js"></script>
	
	<script type="text/javascript">
		var demoApp = angular.module("demoApp", []);
	
		demoApp.config(function($routeProvider) {
			$routeProvider
				.when("/view1",
					{
						controller: "SimpleController",
						templateUrl: "views/view1.html"
					})
				.when("/view2",
					{
						controller: "SimpleController",
						templateUrl: "views/view2.html"
					})
				.otherwise({ redirectTo: "/view1" });
		});
		
		demoApp.factory("simpleFactory", function() {
			var students = [ 
				{ name : 'bruce', grade : 11}, 
				{ name : 'william', grade : 12 },
				{ name : 'bob', grade : 9 }, 
				{ name : 'wynaut', grade : 10 } 
			];
			
			var factory = {};
			
			factory.getStudents = function() {
				return students;
			};
			factory.postStudent = function(student) {
				students.push(student);
			};
			
			return factory;
		});
		
		demoApp.controller("SimpleController", function($scope, simpleFactory) {
			$scope.students = [];
			
			init();
			
			function init() {
				$scope.students = simpleFactory.getStudents();
			}
			   			
			$scope.addStudent = function() {
				var newStudent = {
					name: $scope.newStudent.name,
					grade: $scope.newStudent.grade
				};
				
				simpleFactory.postStudent(newStudent);
				init();
			};
		});
	</script>
</body>
</html>
